# 운영체제 3장 - 프로세스와 스레드

- ###프로세스의 개념

  - 프로그램과 프로세스의 차이

    - 프로그램 : (.exe파일) 저장장치에 저장되어 있는 정적인 상태
    - 프로세스 : 실행을 위해 메모리에 올라온 동적인 상태

  - ### 프로세스 처리 방식

    - 일괄 작업 방식 (먼저 들어온 순서대로 작업을 처리한다.)
    - 시분할 방식 (시간을 배분하여 여러 가지 작업을 동시에 수행한다.)
      - 시분할 방식 예상치 못한 상황 처리
        1. 처리할 작업 없을 경우
        2. 처리 지연 요청 시

  - ### 프로그램에서 프로세스로의 전환

    - 프로세스 : 컴퓨터 시스템의 작업 단위, 태스크라고도 부른다.
    - 운영체제는 프로그램을 메모리의 적당한 위치로 가져와서 작업 지시서를 만드는데, 이 작업 지시서가 프로세스 제어 블록이다.

  - ### 프로세스 제어 블록의 다양한 정보 중 대표적인 3가지

    1. 프로세스 구분자(PID) : 메모리에 여러 개의 프로세스가 존재하므로 각 프로세스를 구분하는 구분자가 필요함.
    2. 메모리 관련 정보 : CPU는 실행하려는 프로세스가 메모리의 어디에 저장되어 있는지 알아야 작업을 할 수 있다. 이를 위해 프로세스 제어 블록에는 프로세스 메모리 위치 정보가 담겨 있으며, 메모리 보호를 위한 경계 레지스터와 한계 레지스터도 포함된다.
    3. 각종 중간값 : 프로세스가 사용했던 중간값이 저장된다.

프로세스 제어 블록이 있느냐, 없느냐에 따라 프로세스가 되느냐, 프로그램이 된다.

 -  ### 프로세스의 4가지 상태

    - 생성 상태 : 프로세스가 메모리에 올라와 실행 준비를 완료한 상태
    - 준비 상태 : 생성딘 프로세스가 CPU를 얻을 때까지 기다리는 상태
      - 다음에 실행할 프로세스를 정하는 일은 CPU 스케줄러가 한다.
      - CPU 스케줄러의 작업 : 디스패치
    - 실행 상태 : 준비 상태에 있는 프로세스 중 하나가 CPU를 얻어 실제 작업을 수행한 상태
    - 완료 상태 : 프로세스 제어 블록이 사라진 상태
    - 오늘날 운영체제의 효율성을 고려하여 한 가지 상태가 더 만들어짐 - 대기 상태 : 입출력을 요구한 프로세스가 입출력이 완료될 때까지 기다리는 상태

- ## 프로세스 제어블록

  - 프로세스를 실행하는 데 필요한 중요한 정보를 보관하는 자료구조. TCB라고도 한다.
    - 포인터
    - 프로세스 상태
    - 프로세스 구분자
    - 프로그램 카운터
    - 프로세스 우선순위
    - 각종 레지스터 정보
    - 메모리 관리 정보
    - 할당된 자원 정보
    - 계정 정보
    - 부모 프로세스 구분자와 자식 프로세스 구분자

- ### 문맥 교환(context switching)

  - 시분할 할 때 발생함
  - 두 프로세스의 프로세스 제어 블록을 교환하는 작업

- ### 프로세스의 구조

  - 코드영역
  - 데이터 영역
  - 스택 영역
  - 힙 영역

- ### 프로세스의 생성과 복사

  - fork() 시스템 호출의 개념
    - 실행 중인 프로세스로부터 새로운 프로세스를 복사하는 함수
    - 복사 시 자식 프로세스에는 PID 없음. 부모 프로세스에만 PID 있음.
  - fork() 시스템 호출의 장점
    - 프로세스의 생성 속도가 빠름
    - 추가 작업 없이 자원을 상속할 수 있다.
    - 시스템 관리를 효율적으로 할 수 있다.